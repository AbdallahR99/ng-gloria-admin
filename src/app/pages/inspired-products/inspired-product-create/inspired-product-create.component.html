<div class="container mx-auto p-4 space-y-6">
  <!-- Header Section -->
  <div
    class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"
  >
    <div>
      <h1 class="text-3xl font-bold">Create Inspired Product</h1>
      <p class="text-base-content/70 mt-1">
        Add a new inspired product to the catalog
      </p>
    </div>

    <!-- Breadcrumbs -->
    <div class="breadcrumbs">
      <ul>
        <li>
          <a [routerLink]="[routes.INSPIRED_PRODUCTS]">Inspired Products</a>
        </li>
        <li>Create</li>
      </ul>
    </div>
  </div>

  <!-- Form Content -->
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-6">
    <!-- Basic Information Card -->
    <div class="card bg-base-100 shadow">
      <div class="card-body">
        <h2 class="card-title">Basic Information</h2>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <!-- English Name -->
          <div class="form-control">
            <label class="label">
              <span class="label-text">Name (English) *</span>
            </label>
            <input
              type="text"
              placeholder="Enter English name"
              class="input input-primary border border-1 border-primary/40"
              [class.input-error]="
                form.get('nameEn')?.invalid && form.get('nameEn')?.touched
              "
              formControlName="nameEn"
            />
            @if (form.get('nameEn')?.invalid && form.get('nameEn')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error">
                @if (form.get('nameEn')?.errors?.['required']) { English name is
                required } @if (form.get('nameEn')?.errors?.['minlength']) {
                Minimum 2 characters required }
              </span>
            </label>
            }
          </div>

          <!-- Arabic Name -->
          <div class="form-control">
            <label class="label">
              <span class="label-text">Name (Arabic) *</span>
            </label>
            <input
              type="text"
              placeholder="أدخل الاسم باللغة العربية"
              class="input input-primary border border-1 border-primary/40"
              [class.input-error]="
                form.get('nameAr')?.invalid && form.get('nameAr')?.touched
              "
              formControlName="nameAr"
              dir="rtl"
            />
            @if (form.get('nameAr')?.invalid && form.get('nameAr')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error">
                @if (form.get('nameAr')?.errors?.['required']) { Arabic name is
                required } @if (form.get('nameAr')?.errors?.['minlength']) {
                Minimum 2 characters required }
              </span>
            </label>
            }
          </div>
        </div>

        <!-- Descriptions -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <!-- English Description -->
          <div class="form-control">
            <label class="label">
              <span class="label-text">Description (English) *</span>
            </label>
            <textarea
              placeholder="Enter English description"
              class="textarea textarea-primary border border-1 border-primary/40 h-32"
              [class.textarea-error]="
                form.get('descriptionEn')?.invalid &&
                form.get('descriptionEn')?.touched
              "
              formControlName="descriptionEn"
            ></textarea>
            @if (form.get('descriptionEn')?.invalid &&
            form.get('descriptionEn')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error">
                @if (form.get('descriptionEn')?.errors?.['required']) { English
                description is required } @if
                (form.get('descriptionEn')?.errors?.['minlength']) { Minimum 2
                characters required }
              </span>
            </label>
            }
          </div>

          <!-- Arabic Description -->
          <div class="form-control">
            <label class="label">
              <span class="label-text">Description (Arabic) *</span>
            </label>
            <textarea
              placeholder="أدخل الوصف باللغة العربية"
              class="textarea textarea-primary border border-1 border-primary/40 h-32"
              [class.textarea-error]="
                form.get('descriptionAr')?.invalid &&
                form.get('descriptionAr')?.touched
              "
              formControlName="descriptionAr"
              dir="rtl"
            ></textarea>
            @if (form.get('descriptionAr')?.invalid &&
            form.get('descriptionAr')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error">
                @if (form.get('descriptionAr')?.errors?.['required']) { Arabic
                description is required } @if
                (form.get('descriptionAr')?.errors?.['minlength']) { Minimum 2
                characters required }
              </span>
            </label>
            }
          </div>
        </div>
      </div>
    </div>

    <!-- SEO Metadata Card -->
    <div class="card bg-base-100 shadow">
      <div class="card-body">
        <h2 class="card-title">SEO Metadata</h2>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <!-- English Meta Title -->
          <div class="form-control">
            <label class="label">
              <span class="label-text">Meta Title (English) *</span>
            </label>
            <input
              type="text"
              placeholder="Enter English meta title"
              class="input input-primary border border-1 border-primary/40"
              [class.input-error]="
                form.get('metaTitleEn')?.invalid &&
                form.get('metaTitleEn')?.touched
              "
              formControlName="metaTitleEn"
            />
            @if (form.get('metaTitleEn')?.invalid &&
            form.get('metaTitleEn')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error">
                @if (form.get('metaTitleEn')?.errors?.['required']) { English
                meta title is required } @if
                (form.get('metaTitleEn')?.errors?.['minlength']) { Minimum 2
                characters required }
              </span>
            </label>
            }
          </div>

          <!-- Arabic Meta Title -->
          <div class="form-control">
            <label class="label">
              <span class="label-text">Meta Title (Arabic) *</span>
            </label>
            <input
              type="text"
              placeholder="أدخل العنوان الوصفي باللغة العربية"
              class="input input-primary border border-1 border-primary/40"
              [class.input-error]="
                form.get('metaTitleAr')?.invalid &&
                form.get('metaTitleAr')?.touched
              "
              formControlName="metaTitleAr"
              dir="rtl"
            />
            @if (form.get('metaTitleAr')?.invalid &&
            form.get('metaTitleAr')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error">
                @if (form.get('metaTitleAr')?.errors?.['required']) { Arabic
                meta title is required } @if
                (form.get('metaTitleAr')?.errors?.['minlength']) { Minimum 2
                characters required }
              </span>
            </label>
            }
          </div>
        </div>

        <!-- Meta Descriptions -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <!-- English Meta Description -->
          <div class="form-control">
            <label class="label">
              <span class="label-text">Meta Description (English) *</span>
            </label>
            <textarea
              placeholder="Enter English meta description"
              class="textarea textarea-primary border border-1 border-primary/40 h-24"
              [class.textarea-error]="
                form.get('metaDescriptionEn')?.invalid &&
                form.get('metaDescriptionEn')?.touched
              "
              formControlName="metaDescriptionEn"
            ></textarea>
            @if (form.get('metaDescriptionEn')?.invalid &&
            form.get('metaDescriptionEn')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error">
                @if (form.get('metaDescriptionEn')?.errors?.['required']) {
                English meta description is required } @if
                (form.get('metaDescriptionEn')?.errors?.['minlength']) { Minimum
                2 characters required }
              </span>
            </label>
            }
          </div>

          <!-- Arabic Meta Description -->
          <div class="form-control">
            <label class="label">
              <span class="label-text">Meta Description (Arabic) *</span>
            </label>
            <textarea
              placeholder="أدخل الوصف الوصفي باللغة العربية"
              class="textarea textarea-primary border border-1 border-primary/40 h-24"
              [class.textarea-error]="
                form.get('metaDescriptionAr')?.invalid &&
                form.get('metaDescriptionAr')?.touched
              "
              formControlName="metaDescriptionAr"
              dir="rtl"
            ></textarea>
            @if (form.get('metaDescriptionAr')?.invalid &&
            form.get('metaDescriptionAr')?.touched) {
            <label class="label">
              <span class="label-text-alt text-error">
                @if (form.get('metaDescriptionAr')?.errors?.['required']) {
                Arabic meta description is required } @if
                (form.get('metaDescriptionAr')?.errors?.['minlength']) { Minimum
                2 characters required }
              </span>
            </label>
            }
          </div>
        </div>
      </div>
    </div>

    <!-- Image Upload Card -->
    <div class="card bg-base-100 shadow">
      <div class="card-body">
        <h2 class="card-title">Product Image</h2>

        <div class="form-control">
          <label class="label">
            <span class="label-text">Upload Image *</span>
          </label>

          @if (form.value.imageFile) {
          <!-- Preview uploaded image -->
          <div class="relative">
            <img
              [src]="form.value.imageFile"
              alt="Uploaded image preview"
              class="w-full max-w-md h-48 object-cover rounded-lg border mx-auto"
            />
            <button
              title="Remove Image"
              type="button"
              class="btn btn-circle btn-sm btn-error absolute top-2 right-2"
              (click)="removeThumbnail()"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-4 w-4"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
            </button>
          </div>
          } @else {
          <!-- Upload area -->
          <div class="relative">
            <input
              title="Upload Product Image"
              type="file"
              accept="image/*"
              class="file-input file-input-primary border border-1 border-primary/40 w-full"
              [class.file-input-error]="
                form.get('imageFile')?.invalid && form.get('imageFile')?.touched
              "
              (change)="uploadThumbnail($event)"
            />
            <div class="mt-2 text-sm text-base-content/70">
              <p>Upload a high-quality image (JPG, PNG, WebP)</p>
              <p>Recommended size: 800x800 pixels, Max size: 5MB</p>
            </div>
          </div>
          } @if (form.get('imageFile')?.invalid &&
          form.get('imageFile')?.touched) {
          <label class="label">
            <span class="label-text-alt text-error">
              @if (form.get('imageFile')?.errors?.['required']) { Product image
              is required }
            </span>
          </label>
          }
        </div>
      </div>
    </div>

    <!-- Form Actions -->
    <div class="card bg-base-100 shadow">
      <div class="card-body">
        <div class="card-actions justify-end">
          <button
            type="button"
            class="btn btn-ghost"
            (click)="onCancel()"
            [disabled]="isSubmitting()"
          >
            Cancel
          </button>
          <button
            type="submit"
            class="btn btn-primary"
            [disabled]="form.invalid || isSubmitting()"
          >
            @if (isSubmitting()) {
            <span class="loading loading-spinner loading-sm"></span>
            Creating... } @else {
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M12 4v16m8-8H4"
              />
            </svg>
            Create Inspired Product }
          </button>
        </div>
      </div>
    </div>
  </form>
</div>
